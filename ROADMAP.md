# 星AI（Constellation Creator）プロジェクトロードマップ

## フェーズ1: 基本機能の実装（完了）

### バックエンド実装
- [x] プロジェクト構造の設定
- [x] FastAPIの基本設定
- [x] 星検出ロジックの実装
  - [x] OpenCVを使用した星の検出
  - [x] 星の座標取得とクラスタリング
  - [x] 星座ライン描画アルゴリズム
- [x] 画像処理機能の実装
  - [x] アップロードされた画像の検証
  - [x] 画像の最適化処理
  - [x] 画像フォーマットの変換
  - [x] AVIF、HEIC等の特殊フォーマットのサポート
- [x] OpenAI GPT APIとの連携
  - [x] APIキーの設定
  - [x] 星座名生成機能
  - [x] 星座ストーリー生成機能
- [x] エラーハンドリングとログ機能
- [x] ユニットテストの実装
  - [x] 星検出テスト
  - [x] 画像処理テスト
  - [x] AVIFサポートテスト
- [x] 星座の視覚化機能の改善
  - [x] 星の座標と星座ライン情報のAPIレスポンスへの追加
  - [x] 星座ライン描画機能の最適化
- [x] デバイスカメラ機能
- [x] AIによる星座クラスタの関連付け

### フロントエンド実装
- [x] プロジェクト構造の設定
- [x] React + TypeScript + Viteの基本設定
- [x] 基本的なUIコンポーネントの作成
- [x] 画像アップロード機能の改善
  - [x] 画像プレビュー機能
  - [x] ドラッグ＆ドロップの改善
  - [x] 画像バリデーション
  - [ ] アップロード進捗表示
- [x] バックエンドとの連携
  - [x] API呼び出しの実装
  - [x] レスポンス処理
- [x] エラーハンドリングの実装
  - [x] エラーメッセージの表示
  - [ ] リトライ機能
- [x] ローディング状態の改善
  - [x] プログレスインジケータ
  - [ ] ステップごとの進捗表示
- [x] 結果表示の改善
  - [x] 星座画像の表示
  - [x] 星座名とストーリーの表示
  - [ ] 共有機能
- [ ] コンポーネントテストの実装
- [x] 星座の視覚化機能の改善
  - [x] Canvas/SVGを使用した星座ライン表示コンポーネントの実装
  - [x] 星座の説明欄の画像表示修正
- [x] デバイスカメラ機能の実装
  - [x] WebRTCを使用したカメラアクセス
  - [x] リアルタイムプレビュー表示
  - [x] 撮影→分析のワンクリックフロー
  - [x] 画像品質の自動最適化
- [x] レスポンシブデザイン
  - [x] モバイルデバイス向けのUI最適化
  - [x] タッチ操作に適したインターフェース
  - [x] スマートフォン向けの機能拡張

## フェーズ2: 機能拡張と最適化（現在）

### バックエンド拡張
- [ ] 画像処理の最適化
  - [ ] 並列処理の導入
  - [ ] キャッシュ機能
- [ ] 星座生成アルゴリズムの改善
  - [ ] キーワードに基づくパターン生成
  - [ ] より自然な星座ライン
- [x] 生成AIとクラスタの関連付け機能
  - [x] 生成AIで生成された星座の特徴解析
    - [x] 星座名とストーリーからの特徴抽出
    - [x] 形状、星の数、配置パターンの解析
  - [x] 検出された星のクラスタと生成星座のマッチング
    - [x] クラスタの特徴解析
    - [x] マッチングスコアの計算
  - [x] 最適なクラスタの選択と表示
    - [x] 選択されたクラスタの強調表示
    - [x] 他のクラスタの薄い表示
- [ ] セキュリティ強化
  - [ ] レート制限
  - [ ] 入力検証
- [ ] パフォーマンスモニタリング

### フロントエンド拡張
- [x] UI/UXの改善
  - [x] レスポンシブデザインの強化
  - [x] アニメーション効果
  - [x] 星座の視覚化機能の改善
    - [x] 選択されたクラスタの強調表示
    - [x] 星座ラインの描画最適化
    - [x] インタラクティブな星座表示
- [ ] オフライン機能
  - [ ] キャッシュ戦略
  - [ ] プログレッシブWebアプリ化
- [ ] アクセシビリティ対応
- [ ] 多言語対応
- [x] デバイスカメラ機能
  - [x] カメラアクセスAPIの実装
  - [x] リアルタイムプレビュー表示
  - [x] 撮影→分析のワンクリックフロー
  - [x] 画像品質の自動最適化

## フェーズ3: デプロイと運用（完了）

### インフラ構築
- [x] GCP環境のセットアップ
  - [x] Cloud Run設定
  - [x] Cloud Storage設定
- [x] CI/CDパイプラインの構築
- [ ] モニタリングとアラート設定

### デプロイ
- [x] 本番環境へのデプロイ
  - [x] Cloud Runへのデプロイ
  - [x] 環境変数の設定
  - [x] サービスアカウントの権限設定
- [ ] ドメイン設定
- [ ] SSL証明書の設定

### 運用
- [ ] パフォーマンス監視
- [ ] ユーザーフィードバック収集
- [ ] バグ修正と改善

## 今後の展望
- モバイルアプリ版の開発
- コミュニティ機能の追加
- 有料機能の検討
- 教育機関向け機能の開発
- スマートフォン向け最適化
  - カメラ機能の強化
  - オフライン機能の拡張
  - プッシュ通知の実装

## 進捗状況
- 開始日: 2025年4月16日
- 現在のフェーズ: フェーズ2（機能拡張と最適化）
- 完了したタスク: プロジェクト構造の設定、基本的なUI実装、星検出ロジックの実装、画像処理機能の実装、ユニットテストの実装、星座の視覚化機能の改善、生成AIとクラスタの関連付け機能、デプロイと運用
- 次のマイルストーン: パフォーマンス最適化、セキュリティ強化、多言語対応、デバイスカメラ機能の実装
    